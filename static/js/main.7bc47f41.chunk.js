(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){},36:function(e,t,a){e.exports=a(53)},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),i=a.n(c),s=a(4),o=a(57),l=a(10),u=a(27),m=a.n(u),d=a(28),p=a(29),f=a(9),h={causeList:[],currentCause:{}};var b={name:"",location:""},E=function(e){return{type:"SET_NAME",payload:e}},v=function(e){return{type:"SET_LOCATION",payload:e}};var y=a(35),C={emailList:[]};var j=function(e,t){return function(a){return fetch("http://127.0.0.1:8000/emails/sent/",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({cause:t,name:encodeURIComponent(e)})}).then((function(e){return e.json()})).then((function(e){a({type:"CREATE_SENT",payload:e})})).catch((function(e){console.error(e)}))}};var O=Object(l.combineReducers)({causes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CAUSES":var a=t.payload;return a?Object(f.a)({},e,{causeList:a.map((function(e){return Object(f.a)({},e,{recipient:e.recipient.map((function(e){return e.email_address}))})}))}):e;case"GET_CAUSE":var n=t.payload,r=Object(f.a)({},n,{recipient:n.recipient.map((function(e){return e.email_address}))});return Object(f.a)({},e,{currentCause:r||e.currentCause});case"CLEAR_CURRENT_CAUSE":return Object(f.a)({},e,{currentCause:{}});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NAME":return Object(f.a)({},e,{name:t.payload});case"SET_LOCATION":return Object(f.a)({},e,{location:t.payload});default:return e}},emails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_EMAILS":return Object(f.a)({},e,{emailList:t.payload||e.emailList});case"CREATE_SENT":var a=t.payload;return a?Object(f.a)({},e,{emailList:[].concat(Object(y.a)(e.emailList),[a])}):e;default:return e}}}),g=Object(p.composeWithDevTools)(Object(l.applyMiddleware)(d.a,m()({collapsed:!0}))),N=Object(l.createStore)(O,g),S=a(2),T=a(3),k=a(5),w=a(6),A=a(11),L=a(55),_=a(30),B=a.n(_),x=a(31),F=(a(22),function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).filterCausesBySearch=Object(x.throttle)((function(){var e=n.state.filterText,t=n.props.causes.causeList;return e.length?t.filter((function(t){return"".concat(t.subject," ").concat(t.body_text," ").concat(t.description||"").toLowerCase().indexOf(e)>=0})):t}),200),n.sortCauses=function(e){var t=n.state.filterText,a=n.props.causes.causeList,r=t.length?n.filterCausesBySearch():a,c=n.state.sortCausesBy;if(c){var i=r.concat().sort((function(e,t){var a=c.field;return e[a]<t[a]?-1:1}));return c&&!c.ascending&&i.reverse(),i}},n.renderSortableColumnName=function(e,t,a,c){var i=n.state[a],s=i&&i.field===t,o=!s||i.ascending,l=!s||!i.ascending;return r.a.createElement("span",{className:B()(["sortable-column-header","center","small-".concat(c)],{"is-selected-sort":s}),onClick:function(){return n.setState((function(e){var r=n.state[a];return Object(A.a)({},a,{field:t,ascending:!r||r.field!==t||!r.ascending})}))}},r.a.createElement("span",{className:"name"},e),r.a.createElement("span",{className:"sort-arrows"},o&&r.a.createElement("span",{className:"Arrow Arrow--up"}),l&&r.a.createElement("span",{className:"Arrow Arrow--down"})))},n.state={filterText:"",sortCausesBy:{field:"created",ascending:!0}},n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.resetCurrentCause()}},{key:"renderCauses",value:function(){var e=this.props.causes.causeList;return r.a.createElement("section",{className:"all-causes"},r.a.createElement("header",{className:"table-headers"},r.a.createElement("span",{className:"small-1"},"Email"),r.a.createElement("span",{className:"small-2 center"},"Subject"),this.renderSortableColumnName("Victim","victim_name","sortCausesBy",1),this.renderSortableColumnName("State","state","sortCausesBy",1),r.a.createElement("span",{className:"small-4 center"},"Email Body"),this.renderSortableColumnName("Added","created","sortCausesBy",1)),r.a.createElement("ul",null,this.sortCauses(e).map((function(e){return r.a.createElement("li",{key:"causeItem ".concat(e.id)},r.a.createElement(q,{cause:e}))}))))}},{key:"render",value:function(){var e=this.props.emails.emailList,t=null;if(e&&e.length){var a=e.reduce((function(e,t){var a=t.id.toString();return a in e?e[a]++:e[a]=1,e}),{});for(var n in a)t?a[t]<a[n]&&(t=n):t=n}return r.a.createElement("div",{className:"casues-page"},r.a.createElement("h2",null,"Take Action and Support These Causes"),r.a.createElement("p",{className:"causes-summary"},"Review the below causes and if any of them resonante with you, TAKE ACTION and send an email demanding justice.  You are encouraged to edit the body of the email to add your specific opinion about the situation, custom emails are always more impactful; however, if time does not allow, sending a templated email is better than nothing at all!"),t&&r.a.createElement(L.a,{to:"/causes/".concat(t),className:"most-popular"},"Most Popular Cause"),this.renderCauses())}}]),a}(n.Component)),I=Object(s.b)((function(e){return{causes:e.causes,emails:e.emails}}),(function(e){return{resetCurrentCause:function(){e((function(e){return e({type:"CLEAR_CURRENT_CAUSE"})}))}}}))(F),M=function(e,t,a,n){var r=n&&n.name&&n.location?"My name is ".concat(n.name,". I am a resident of ").concat(n.location," and "):"",c=n&&n.name?"Sincerely, ".concat(n.name):"Thank You.",i="".concat(r).concat(a,"\n    ").concat(c);return{toField:e?e.join(", "):"",subject:t,fullBody:i}},D=(a(49),function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getLocationText=function(e,t){return e||t?[e,t].join(", "):""},e.handleSubmit=function(){var t=e.props,a=t.causes.currentCause,n=t.user;(0,t.recordSentEmail)(n.name,a.id)},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.getCausebyId(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props,t=e.causes.currentCause,a=e.user;if(!t||!t.subject)return null;var n=M(t.recipient,t.subject,t.body_text,a),c=n.toField,i=n.subject,s=n.fullBody,o=this.getLocationText(t.city,t.state);return r.a.createElement("div",{className:"cause-detail-container"},r.a.createElement("h1",null,"".concat(t.subject)),t.victim_name&&r.a.createElement("div",{className:"field-item"},r.a.createElement("span",{className:"bold"},"Victim: "),r.a.createElement("span",null,t.victim_name)),o&&r.a.createElement("div",{className:"field-item"},r.a.createElement("span",{className:"bold"},"Location: "),r.a.createElement("span",null,o)),t.description&&r.a.createElement("div",{className:"field-item"},r.a.createElement("span",{className:"bold"},"Description of Cause: "),r.a.createElement("span",null,t.description)),r.a.createElement("div",{title:"Send an Email!"},r.a.createElement("a",{className:"button button-primary",onClick:this.handleSubmit,href:"mailto:".concat(c,"?subject=").concat(i,"&body=").concat(s)},r.a.createElement("p",{className:"primary-text"},"Demand Justice"))),r.a.createElement("div",{className:"field-item"},r.a.createElement("span",{className:"bold"},"PLEASE consider taking action and emailing the relevant decision makers! Click this button to auto-populate your email.  You are encouraged to edit the body of the email to add your specific opinion about the situation, custom emails are always more impactful; however, if time does not allow, sending a templated email is better than nothing at all!  ")),r.a.createElement("div",{className:"field-item"},r.a.createElement("span",{className:"bold"},"Email Body Template: "),r.a.createElement("span",null,t.body_text)))}}]),a}(n.Component)),R=Object(s.b)((function(e){return{user:e.user,causes:e.causes}}),(function(e){return{getCausebyId:function(t){e(function(e){return function(t){return fetch("http://127.0.0.1:8000/emails/cause/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){t(function(e){return{type:"GET_CAUSE",payload:e}}(e))})).catch((function(e){return console.warn(e)}))}}(t))},recordSentEmail:function(t,a){e(j(t,a))}}}))(D),U=(a(50),function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).handleChange=function(e){e.preventDefault(),n.setState(Object(A.a)({},e.currentTarget.id,e.currentTarget.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.nameField,r=t.locationField;n.props.updateUser(a,r)},n.state={nameField:e.user.name,locationField:e.user.location},n}return Object(T.a)(a,[{key:"render",value:function(){var e=this.state,t=e.nameField,a=e.locationField;return r.a.createElement("form",{className:"login-form"},r.a.createElement("label",{htmlFor:"nameField"},"Name"),r.a.createElement("input",{type:"text",placeholder:"Name as it will appear in emails",id:"nameField",value:t,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"locationField"},"Location"),r.a.createElement("input",{type:"text",placeholder:"Your location as it will appear in emails",id:"locationField",value:a,onChange:this.handleChange}),r.a.createElement("input",{className:"button-primary",type:"submit",value:"Send",onClick:this.handleSubmit}))}}]),a}(n.Component)),G=Object(s.b)((function(e,t){return{user:e.user}}),(function(e){return{updateUser:function(t,a){e(E(t)),e(v(a))}}}))(U),Y=(a(51),function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.getSentEmails()}},{key:"render",value:function(){var e=this.props.emails.emailList;return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-bar"},r.a.createElement("h4",null,"".concat(e.length," Emails Sent!")),r.a.createElement("h3",null,"Email Action Database"),r.a.createElement(L.a,{to:"/causes"},r.a.createElement("button",{className:"navLink"},"Cause List"))))}}]),a}(n.Component)),J=Object(s.b)((function(e){return{emails:e.emails}}),(function(e){return{getSentEmails:function(){e((function(e){return fetch("http://127.0.0.1:8000/emails/sent/",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){return e.json()})).then((function(t){e({type:"GET_EMAILS",payload:t})})).catch((function(e){return console.warn(e)}))}))}}}))(Y),P=a(58),V=a(32),K=a.n(V),W=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(S.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).handleClickItem=function(){var t=e.props,a=t.cause;t.history.push("/causes/".concat(a.id))},e.handleSubmit=function(){var t=e.props,a=t.cause,n=t.user;(0,t.recordSentEmail)(n.name,a.id)},e.renderBasicCell=function(t,a){return r.a.createElement("p",{className:"small-".concat(a," cause-cell"),title:"Click For More Information",onClick:e.handleClickItem},t)},e}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props,t=e.cause,a=e.user;if(!t)return null;var n=M(t.recipient,t.subject,t.body_text,a),c=n.toField,i=n.subject,s=n.fullBody;return r.a.createElement("div",{className:"casues-page"},r.a.createElement("div",{className:"item-container"},r.a.createElement("a",{className:"button small-1 button-outline cause-cell",title:"Take Action!",onClick:this.handleSubmit,href:"mailto:".concat(c,"?subject=").concat(i,"&body=").concat(s)},r.a.createElement("p",null,"Email")),this.renderBasicCell(t.subject,2),this.renderBasicCell(t.victim_name||"",1),this.renderBasicCell(t.state||"",1),this.renderBasicCell(t.body_text||"",4),this.renderBasicCell(K()(t.created).format("MM/DD/YYYY"),1)))}}]),a}(n.Component),q=Object(P.a)(Object(s.b)((function(e){return{user:e.user}}),(function(e){return{recordSentEmail:function(t,a){e(j(t,a))}}}))(W)),z=a(59),H=a(56),Q=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.getCauseList()}},{key:"render",value:function(){var e=this.props.user,t=e.name,a=e.location;return r.a.createElement(z.a,null,t&&a&&r.a.createElement(z.a,null,r.a.createElement(H.a,{exact:!0,path:"/causes/",component:I}),r.a.createElement(H.a,{path:"/causes/:id",component:R}),r.a.createElement(H.a,{exact:!0,path:"/",component:I})),r.a.createElement(H.a,{path:"/",component:G}))}}]),a}(n.Component),X=Object(P.a)(Object(s.b)((function(e){return{user:e.user}}),(function(e){return{getCauseList:function(){e((function(e){return fetch("http://127.0.0.1:8000/emails/cause/",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){return e.json()})).then((function(t){e({type:"GET_CAUSES",payload:t})})).catch((function(e){return console.warn(e)}))}))}}}))(Q)),Z=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(X,null))}}]),a}(n.Component);i.a.render(r.a.createElement(s.a,{store:N},r.a.createElement(o.a,null,r.a.createElement(Z,null))),document.getElementById("app"))}},[[36,1,2]]]);
//# sourceMappingURL=main.7bc47f41.chunk.js.map